---
layout: layouts/base.njk
---

<p><a href="/work/">← back</a></p>

<article class="project-detail">
  <header class="project-header">
    <h1>Project: {{ title }}</h1>
    <div class="project-meta">
      {% if client %}
      <div class="project-meta-item">
        <strong>Client:</strong> {{ client }}
      </div>
      {% endif %}
      {% if role %}
      <div class="project-meta-item">
        <strong>Role:</strong> {{ role }}
      </div>
      {% endif %}
      {% if year %}
      <div class="project-meta-item">
        <strong>Year:</strong> {{ year }}
      </div>
      {% endif %}
      {% if url %}
      <div class="project-meta-item">
        <strong>URL:</strong> <a href="{{ url }}" target="_blank" rel="noopener noreferrer">{{ url }}</a>
      </div>
      {% endif %}
    </div>
  </header>

  <!-- Checks if we have detailed content sections -->
  {% set hasContent = introSection or screensSection or backstorySection %}
  {% if not hasContent %}
     {# No detailed content: Show Cover and Big Link #}
     {% if coverImage %}
        {% image "src/images/projects/" ~ slug ~ "/" ~ coverImage, title ~ " Cover", "100vw", "project-hero-image" %}
     {% endif %}
     
     <p>
       This project does not have a detailed case study yet. 
       {% if url %}
         You can visit the live project at <a href="{{ url }}">{{ url }}</a>.
       {% endif %}
     </p>

  {% else %}
      {# Existing Content Flow #}
      
      {% if introSection %}
      <section class="project-intro">
        <h2>{{ introSection.title }}</h2>
        <div>{{ introSection.text | safe }}</div>
      </section>
      {% endif %}

      {% if screensSection %}
      <section class="project-screens">
        {% for screen in screensSection %}
          <div class="screen-item">
             {% image "src/images/projects/" ~ slug ~ "/" ~ screen.image, "", "100vw", "screen-image" %}
             {% if screen.text %}
               <p class="screen-text">{{ screen.text }}</p>
             {% endif %}
          </div>
        {% endfor %}
      </section>
      {% endif %}

      {% if backstorySection %}
      <section class="backstory-section">
        <h3>Backstory</h3>
        <div>{{ backstorySection.text | safe }}</div>
      </section>
      {% endif %}
      
      {% if content | length > 0 %}
        <div class="project-main-content">
          {{ content | safe }}
        </div>
      {% endif %}

  {% endif %}


  <div class="project-nav">
    {% set previousProject = collections.work | getPreviousCollectionItem(page) %}
    {% if not previousProject %}
      {% set previousProject = collections.work | last %}
    {% endif %}
    {% if previousProject %}
      <p>← Previous project: <a href="{{ previousProject.url }}">{{ previousProject.data.title }}</a></p>
    {% endif %}

    {% set nextProject = collections.work | getNextCollectionItem(page) %}
    {% if not nextProject %}
      {% set nextProject = collections.work | first %}
    {% endif %}
    {% if nextProject %}
      <p>Next project: <a href="{{ nextProject.url }}">{{ nextProject.data.title }}</a> →</p>
    {% endif %}
  </div>
</article>
